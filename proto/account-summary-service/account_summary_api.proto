syntax = "proto3";

import "google/api/annotations.proto";
import "protoc-gen-openapiv2/options/annotations.proto";
import "account-summary-service/account_summary_payload.proto";
import "google/api/httpbody.proto";

package account_summary.service.v1;
option go_package = "./pb";

option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {
    security_definitions: {
        security: {
                key: "bearer"
                value: {
                type: TYPE_API_KEY
                in: IN_HEADER
                name: "Authorization"
                description: "Authentication token, prefixed by Bearer: Bearer <token>"
            }
        }
    }
    security: {
        security_requirement: {
            key: "bearer"
        }
    }
};

service ApiService {
    rpc GetBrifizToken(Empty) returns (GetBrifizTokenResponse) {
        option (google.api.http) = {
            get: "/api/account-summary/trusted/token"
        };
        option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
            security: { } // Disable security key
            summary: "Trusted token"
            description: "This API for get brifiz trusted token",
        };
    }

    rpc GetSummaryAccount(GetSummaryAccountRequest) returns (GetSummaryAccountResponse){
        option (google.api.http) = {
            post: "/api/account-summary"
            body: "*"
        };
        option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
            security: { } // Disable security key
            summary: "Get account summary based on account"
            description: "This API for get account summary",
            responses: {
                key: "200",
                value: {
                    description: "This status code is 200 when successfully get data account summary";
                }
            }
        };
    }

    rpc DownloadSummaryAccount(DownloadSummaryAccountRequest) returns (google.api.HttpBody) {
        option (google.api.http) = {
            post: "/api/account-summary/download/{fileFormat}"
            body: "*"
        };
        option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
            security: { } // Disable security key
            summary: "Download Account Summary"
            description: "This API for get account summary",
        };
    }

    rpc GetGlobalSummaryAccount(GetGlobalAccountSummaryRequest) returns (GetGlobalAccountSummaryResponse){
        option (google.api.http) = {
            post: "/api/account-summary/ukln-account-summary"
            body: "*"
        };
        option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
            summary: "Get account summary based on account"
            description: "This API for get account summary",
            responses: {
                key: "200",
                value: {
                    description: "This status code is 200 when successfully get data global account summary";
                }
            }
        };

    }

    rpc GetGlobalSummaryAccountDetail(DetailGlobalAccountSummaryRequest) returns (GetDetailGlobalAccountSummaryResponse){
        option (google.api.http) = {
            post: "/api/account-summary/ukln-account-summary-detail"
            body: "*"
        };
        option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
            summary: "Get account summary based on account"
            description: "This API for get account summary",
            responses: {
                key: "200",
                value: {
                    description: "This status code is 200 when successfully get data global account summary";
                }
            }
        };
    }

    rpc DownloadGlobalSummaryAccount(DownloadGlobalSummaryAccountRequest) returns (google.api.HttpBody) {
        option (google.api.http) = {
            post: "/api/account-summary/ukln-account-summary/download/{fileFormat}"
            body: "*"
        };
        option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
            summary: "Download Global Account Summary"
            description: "This API for download global account summary",
        };
    }
}

message HealthCheckResponse {
    string message = 1;
}

message ErrorBodyResponse {
    bool error = 1;
    uint32 code = 2;
    string message = 3;
}

message Empty {}
