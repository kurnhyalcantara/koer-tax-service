syntax = "proto3";

import "google/api/annotations.proto";
// import "protoc-gen-openapiv2/options/annotations.proto";

import "product-service/product_payload.proto";

package product.service.v1;
option go_package = "./pb";

// option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_swagger) = {
//     security_definitions: {
//         security: {
//                 key: "bearer"
//                 value: {
//                 type: TYPE_API_KEY
//                 in: IN_HEADER
//                 name: "Authorization"
//                 description: "Authentication token, prefixed by Bearer: Bearer <token>"
//             }
//         }
//     }
//     security: {
//         security_requirement: {
//             key: "bearer"
//         }
//     }
// };

service ApiService {

    rpc HealthCheck(Empty) returns (HealthCheckResponse) {
        option (google.api.http) = {
            get: "/api/product/health"
        };
        // option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
        //     security: { } // Disable security key
        // };
    };

    rpc ListProduct(ListProductRequest) returns (ListProductResponse);

    rpc ListProductHttp(ListProductRequest) returns (ListProductResponse){
        option (google.api.http) = {
            get: "/api/product"
        };
    }

    rpc ListProductGrpc(ListProductRequest) returns (ListProductResponse);
    rpc ListProductGrpcStream(ListProductRequest) returns (stream StreamProductResponse);

    // rpc CreateProduct(CreateProductRequest) returns (CreateProductResponse){
    //     option (google.api.http) = {
    //         post: "/api/product"
    //         body: "*"
    //     };
    // }
    rpc ProductByID(ProductByIDRequest) returns (ProductByIDResponse){
        option (google.api.http) = {
            get: "/api/product/{ProductID}"
        };
    }
    rpc GetProductByID(ProductByIDRequest) returns (ProductByIDResponse){}

    rpc GetCompanyProductsInfoByListID (GetCompanyProductsRequest) returns (GetCompanyProductsResponse){
//        option (google.api.http) = {
//            post: "/api/product/company"
//            body: "*"
//        };
    }

    rpc BiGetProductsByID(stream BiGetProductRequest) returns (stream BiGetProductResponse);
}
